_satellite.pushAsyncScript(function(event, target, $variables){
  jQuery(window).load(function(){if(_satellite.getQueryParamCaseInsensitive('loadForDevUtilities')==='true'){JSONstring={compactOutput:false,includeProtos:false,includeFunctions:true,detectCirculars:true,restoreCirculars:true,make:function(arg,restore){this.restore=restore;this.mem=[];this.pathMem=[];return this.toJsonStringArray(arg).join('');},toObject:function(x){if(!this.cleaner){try{this.cleaner=new RegExp('^("(\\\\.|[^"\\\\\\n\\r])*?"|[,:{}\\[\\]0-9.\\-+Eaeflnr-u \\n\\r\\t])+?$')}catch(a){this.cleaner=/^(true|false|null|\[.*\]|\{.*\}|".*"|\d+|\d+\.\d+)$/}};if(!this.cleaner.test(x)){return{}};eval("this.myObj="+x);if(!this.restoreCirculars||!alert){return this.myObj};if(this.includeFunctions){var x=this.myObj;for(var i in x){if(typeof x[i]=="string"&&!x[i].indexOf("JSONincludedFunc:")){x[i]=x[i].substring(17);eval("x[i]="+x[i])}}};this.restoreCode=[];this.make(this.myObj,true);var r=this.restoreCode.join(";")+";";eval('r=r.replace(/\\W([0-9]{1,})(\\W)/g,"[$1]$2").replace(/\\.\\;/g,";")');eval(r);return this.myObj},toJsonStringArray:function(arg,out){if(!out){this.path=[]};out=out||[];var u;switch(typeof arg){case'object':this.lastObj=arg;if(this.detectCirculars){var m=this.mem;var n=this.pathMem;for(var i=0;i<m.length;i++){if(arg===m[i]){out.push('"JSONcircRef:'+n[i]+'"');return out}};m.push(arg);n.push(this.path.join("."));};if(arg){if(arg.constructor==Array){out.push('[');for(var i=0;i<arg.length;++i){this.path.push(i);if(i>0)
out.push(',\n');this.toJsonStringArray(arg[i],out);this.path.pop();}
out.push(']');return out;}else if(typeof arg.toString!='undefined'){out.push('{');var first=true;for(var i in arg){if(!this.includeProtos&&arg[i]===arg.constructor.prototype[i]){continue};this.path.push(i);var curr=out.length;if(!first)
out.push(this.compactOutput?',':',\n');this.toJsonStringArray(i,out);out.push(':');this.toJsonStringArray(arg[i],out);if(out[out.length-1]==u)
out.splice(curr,out.length-curr);else
first=false;this.path.pop();}
out.push('}');return out;}
return out;}
out.push('null');return out;case'unknown':case'undefined':case'function':if(!this.includeFunctions){out.push(u);return out};arg="JSONincludedFunc:"+arg;out.push('"');var a=['\\','\\\\','\n','\\n','\r','\\r','"','\\"'];arg+="";for(var i=0;i<8;i+=2){arg=arg.split(a[i]).join(a[i+1])};out.push(arg);out.push('"');return out;case'string':if(this.restore&&arg.indexOf("JSONcircRef:")==0){this.restoreCode.push('this.myObj.'+this.path.join(".")+"="+arg.split("JSONcircRef:").join("this.myObj."));};out.push('"');var a=['\n','\\n','\r','\\r','"','\\"'];arg+="";for(var i=0;i<6;i+=2){arg=arg.split(a[i]).join(a[i+1])};out.push(arg);out.push('"');return out;default:out.push(String(arg));return out;}}};omni.Utilities.SourceControl={dataElements:JSONstring.make(_satellite.dataElements),eventBasedRules:JSONstring.make(_satellite.configurationSettings.rules),pageLoadRules:JSONstring.make(_satellite.configurationSettings.pageLoadRules),directCallRules:JSONstring.make(_satellite.configurationSettings.directCallRules)};_satellite.notify('02 domready Source Control - DTM Backups - Page Code',1);omni.Utilities.SiteAnaltyicsInspector={Components:"",Metadata:"",GetComponentsList:function(){jQuery.ajax({url:"/api/sitecore/SiteAnalytics/GetComponentsAnalyticsObjects",type:"POST",datatype:"json",contentType:"application/json",success:function(data){omni.Utilities.SiteAnaltyicsInspector.Components=data;console.log("Extracted Components Count: "+data.length);}});},GetMetadataList:function(){jQuery.ajax({url:"/api/sitecore/SiteAnalytics/GetMetadataAnalyticsObject",type:"POST",datatype:"json",contentType:"application/json",success:function(data){omni.Utilities.SiteAnaltyicsInspector.Metadata=data;console.log("Extracted Metadata Count: "+data.length);}});},AnalyzeComponents:function(){console.log("Verify component items without SiteAnalyticsId mapping...");var counter=0;jQuery(omni.Utilities.SiteAnaltyicsInspector.Components).each(function(i,v){if(v.SACode==null||v.SACode.length==0){console.log("ComponentName: "+v.Name+": "+v.Id+" - SACode:"+v.SACode);counter++;console.log("Update Counter: "+counter);}});if(counter===0){console.log("All Components contains mapping!");}},AnalyzeMetadata:function(){console.log("Verify metadata items without SiteAnalyticsId mapping...");var counter=0;jQuery(omni.Utilities.SiteAnaltyicsInspector.Metadata).each(function(i,v){if((v.SACode==null||v.SACode.length==0)&&v.ItemPath.lastIndexOf("/")!=44){counter++;console.log("ItemId: "+v.Id
+"|SACode: "+v.SACode
+"|Name: "+v.Name
+"|DisplayName: "+v.DisplayName
+"|Path:"+v.ItemPath
+"|Category:"+v.Category
+"|CategorySACode:"+v.CategorySACode
+"|CategoryId:"+v.CategoryId
+"|Count:"+counter);}});if(counter===0){console.log("All Metadata contains mapping!");}},ConvertJSONToCSV:function(objArray){var arrayData=typeof objArray!='object'?JSON.parse(objArray):objArray;var list='';var colRecord='';for(var index in arrayData[0]){var value=index+"";colRecord+='"'+value.replace(/"/g,'""')+'",';}
colRecord=colRecord.slice(0,-1);list+=colRecord+'\r\n';for(var i=0;i<arrayData.length;i++){var rowRecord='';for(var index in arrayData[i]){var value=arrayData[i][index]+"";rowRecord+='"'+value.replace(/"/g,'""')+'",';}
rowRecord=rowRecord.slice(0,-1);list+=rowRecord+'\r\n';}
return list;},ExtractComponentsToCSV:function(){var csvData=omni.Utilities.SiteAnaltyicsInspector.ConvertJSONToCSV(omni.Utilities.SiteAnaltyicsInspector.Components);window.open("data:text/csv;charset=utf-8,"+escape(csvData),"_blank","width=400px, height=200px, resizable=no");},ExtractMetadataToCSV:function(){var csvData=omni.Utilities.SiteAnaltyicsInspector.ConvertJSONToCSV(omni.Utilities.SiteAnaltyicsInspector.Metadata);window.open("data:text/csv;charset=utf-8,"+escape(csvData),"_blank","width=400px, height=200px, resizable=no");}}
_satellite.notify('02 domready Source Control - SiteAnalytics Inspector - Page Code',1);}});
});
